{% extends 'base.html' %}

{% block header %}
  <h1> {% block title %} {{ this_user[1] }}'s Page {% endblock %} #{{ this_user[0] }} </h1>
{% endblock %}

{% block content %}

<!--
    ideas to add:
        * recent updates (display previous 3 shows/movies added)
        * statistics
            - movies watched
            - shows watched
            - average rating


--> 

<div class="user_page_VStack">




    <!-- User Bio -->
    <div class="user_page_bio">
        <p>
            {{ "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Et egestas quis ipsum suspendisse ultrices gravida. Nec feugiat in fermentum posuere urna nec tincidunt praesent semper. Tortor dignissim convallis aenean et tortor. Accumsan in nisl nisi scelerisque eu ultrices vitae auctor. Libero justo laoreet sit amet. In ornare quam viverra orci sagittis eu. Auctor urna nunc id cursus metus. Tincidunt augue interdum velit euismod in pellentesque massa placerat. Aliquam malesuada bibendum arcu vitae." }}
        </p>
    </div>



    <!-- Socials -->
    <div class="user_page_socials">
        <p> Friends:   {{ 25 }} </p>
        <p> Followers: {{ 12 }} </p>
        <button type="submit"> Add Friend </button>
    </div>



    <!-- User Page Content -->
    <div class="user_page_HStack">

        <!-- User Statistics -->
        <div class="user-page-statistics">

            <p class="statistics-header"> Statistics </p>
        
            <ul class="user-statistics">
                {% for entry in statistics %}

                <div class="statistics-spacer">
                <li class="statistics-label"> {{ entry[0] }} <li>
                <li class="statistics-item" > {{ entry[1] }} <li>
                </div>

                {% endfor %}
            </ul>
        
        </div>

        <!-- Watch List Display -->
        <div class="user_watch_lists">

            <div class="watch_lists_info">
                <h3> {{ this_user[1] }}'s Watch Lists </h3>

                <!-- 
                Only show the edit buttons if the one viewing this user page is logged in as the owner
                    the users id (if logged in):    {{ g.user[0]    }}
                    id of the user page:            {{ this_user[0] }}

                Later on I want to give the modal dialogue the user id so it can see the user's data (movies already in this list, etc)
                    The URL would need to be: /user/<userID>/modal
                    So:
                        hx-get="/user/{{g.user[0]}}/modal"
                -->
                {% if g.user is not none %}
                    {% if g.user[0]|int == this_user[0]|int %}
                    
                    <button 
                        hx-get="/user/modal" 
                        hx-target="#modals-here" 
                        hx-trigger="click"
                        hx-swap="innerHTML"
                        > Create New Watch List
                    </button>

                    {% endif %}
                {% endif %}

                

            </div>

            <div class="list_preview_wrapper">
                {% for watch_list in user_lists %}

                <div class="list_preview">
                    <h3> {{ watch_list[3] }} </h3>
                    <p>  {{ watch_list[4] }}  </p>
                    <p>  Created On: {{ watch_list[6] }}  </p>
                    <a href="{{ url_for('watch_list', listID=watch_list[0]) }}">View List</a>
                </div>

                {% endfor %}
            </div>
        </div>

        <!-- User Statistics -->
        <div class="user-page-statistics">

            <p class="statistics-header"> User Comparison </p>
        
            <ul class="user-statistics">
                {% for entry in user_comparison %}

                <div class="statistics-spacer">
                <li class="statistics-label"> {{ entry[0] }} <li>
                <li class="statistics-item" > {{ entry[1] }} <li>
                </div>

                {% endfor %}
            </ul>
        
        </div>

    </div>  

    <div id="modals-here"> </div>

</div>

{% endblock %}